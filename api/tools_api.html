<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>tools Package &#8212; abipy 0.8.0 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/my_style.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="waves Package" href="waves_api.html" />
    <link rel="prev" title="panels Package" href="panels_api.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          abipy</a>
        <span class="navbar-text navbar-version pull-left"><b>0.8.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Getting AbiPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zzbiblio.html">Bibliography</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripts/index.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graphical_interface.html">Graphical interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">AbiPy Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../postprocessing_howto.html">Post-processing How-To</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../workflows/taskmanager.html">TaskManager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../workflows/manager_examples.html">Manager Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow_gallery/index.html">Flow Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flows_howto.html">Flows How-To</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coding_guide.html">Coding guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../README.html">Documenting AbiPy</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">tools Package</a><ul>
<li><a class="reference internal" href="#module-abipy.tools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.bessel"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bessel</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.decorators"><code class="xref py py-mod docutils literal notranslate"><span class="pre">decorators</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.derivatives"><code class="xref py py-mod docutils literal notranslate"><span class="pre">derivatives</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.devtools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">devtools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.duck"><code class="xref py py-mod docutils literal notranslate"><span class="pre">duck</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.fftprof"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fftprof</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.iotools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iotools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.notebooks"><code class="xref py py-mod docutils literal notranslate"><span class="pre">notebooks</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.numtools"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numtools</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.plotting"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.tensors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tensors</span></code> Module</a></li>
<li><a class="reference internal" href="#module-abipy.tools.text"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text</span></code> Module</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="panels_api.html" title="Previous Chapter: panels Package"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; panels Package</span>
    </a>
  </li>
  <li>
    <a href="waves_api.html" title="Next Chapter: waves Package"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">waves Package &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../_sources/api/tools_api.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="tools-package">
<h1><a class="toc-backref" href="#contents">tools Package</a><a class="headerlink" href="#tools-package" title="Permalink to this headline">Â¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#tools-package" id="id1">tools Package</a></p>
<ul>
<li><p><a class="reference internal" href="#module-abipy.tools" id="id2"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.bessel" id="id3"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bessel</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.decorators" id="id4"><code class="xref py py-mod docutils literal notranslate"><span class="pre">decorators</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.derivatives" id="id5"><code class="xref py py-mod docutils literal notranslate"><span class="pre">derivatives</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.devtools" id="id6"><code class="xref py py-mod docutils literal notranslate"><span class="pre">devtools</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.duck" id="id7"><code class="xref py py-mod docutils literal notranslate"><span class="pre">duck</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.fftprof" id="id8"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fftprof</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.iotools" id="id9"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iotools</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.notebooks" id="id10"><code class="xref py py-mod docutils literal notranslate"><span class="pre">notebooks</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.numtools" id="id11"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numtools</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.plotting" id="id12"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.tensors" id="id13"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tensors</span></code> Module</a></p></li>
<li><p><a class="reference internal" href="#module-abipy.tools.text" id="id14"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text</span></code> Module</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="module-abipy.tools">
<span id="tools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools" title="Permalink to this headline">Â¶</a></h2>
<p>Helper functions.</p>
</div>
<div class="section" id="module-abipy.tools.bessel">
<span id="bessel-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bessel</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.bessel" title="Permalink to this headline">Â¶</a></h2>
<p>This module provides functions to compute integrals of Bessel functions.</p>
<dl class="function">
<dt id="abipy.tools.bessel.spline_int_jlqr">
<code class="sig-prename descclassname">abipy.tools.bessel.</code><code class="sig-name descname">spline_int_jlqr</code><span class="sig-paren">(</span><em class="sig-param">l</em>, <em class="sig-param">qmax</em>, <em class="sig-param">rcut</em>, <em class="sig-param">numq=None</em>, <em class="sig-param">numr=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/bessel.html#spline_int_jlqr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.bessel.spline_int_jlqr" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute <span class="math notranslate nohighlight">\(j_n(z) = \int_0^{rcut} r^2 j_l(qr) dr\)</span>
where <span class="math notranslate nohighlight">\(j_l\)</span> is the Spherical Bessel function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>l</strong> â Angular momentum</p></li>
<li><p><strong>qmax</strong> â Max <span class="math notranslate nohighlight">\(|q|\)</span> in integral in Ang-1</p></li>
<li><p><strong>rcut</strong> â Sphere radius in Angstrom.</p></li>
<li><p><strong>numq</strong> â Number of q-points in qmesh.</p></li>
<li><p><strong>numr</strong> â Number of r-points for integration.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Spline object.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.decorators">
<span id="decorators-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">decorators</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.decorators" title="Permalink to this headline">Â¶</a></h2>
<p>Decorators.</p>
<dl class="function">
<dt id="abipy.tools.decorators.return_straceback_ifexc">
<code class="sig-prename descclassname">abipy.tools.decorators.</code><code class="sig-name descname">return_straceback_ifexc</code><span class="sig-paren">(</span><em class="sig-param">func</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/decorators.html#return_straceback_ifexc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.decorators.return_straceback_ifexc" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Decorator for functions that are supposed to return a string for logging purposes (e.g. str)
Instead of raising an exception, the decorated function returns a string with the
traceback so that execution can continue.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.decorators.timeit">
<code class="sig-prename descclassname">abipy.tools.decorators.</code><code class="sig-name descname">timeit</code><span class="sig-paren">(</span><em class="sig-param">method</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/decorators.html#timeit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.decorators.timeit" title="Permalink to this definition">Â¶</a></dt>
<dd><p>timeit decorator adapted from:
<a class="reference external" href="https://medium.com/pythonhive/python-decorator-to-measure-the-execution-time-of-methods-fa04cb6bb36d">https://medium.com/pythonhive/python-decorator-to-measure-the-execution-time-of-methods-fa04cb6bb36d</a>
sets the timing of the routine as an attribute of the class</p>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.derivatives">
<span id="derivatives-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">derivatives</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.derivatives" title="Permalink to this headline">Â¶</a></h2>
<p>Tools for computing derivatives by finite differences.</p>
<dl class="function">
<dt id="abipy.tools.derivatives.finite_diff">
<code class="sig-prename descclassname">abipy.tools.derivatives.</code><code class="sig-name descname">finite_diff</code><span class="sig-paren">(</span><em class="sig-param">arr</em>, <em class="sig-param">h</em>, <em class="sig-param">order=1</em>, <em class="sig-param">acc=4</em>, <em class="sig-param">index=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/derivatives.html#finite_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.derivatives.finite_diff" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Compute the derivative of order <cite>order</cite> by finite difference.
For each point in arr, the function tries to use central differences
and fallbacks to forward/backward approximations for points that are close to the extrema.
Note that high accuracy levels can fail and raise <cite>ValueError</cite> if not enough points are available in <cite>arr</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arr</strong> â Input array with y-values.</p></li>
<li><p><strong>h</strong> â Spacing along x</p></li>
<li><p><strong>order</strong> â Derivative order</p></li>
<li><p><strong>acc</strong> â accuracy level.</p></li>
<li><p><strong>index</strong> â If not None, gives the index of the single element in arr where the derivative is wanted.
In this case a namedtuple with the derivative, the number of points used and the mode is returned</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array or (value, npts, mode) if index is not None .</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.devtools">
<span id="devtools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">devtools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.devtools" title="Permalink to this headline">Â¶</a></h2>
<dl class="function">
<dt id="abipy.tools.devtools.profile">
<code class="sig-prename descclassname">abipy.tools.devtools.</code><code class="sig-name descname">profile</code><span class="sig-paren">(</span><em class="sig-param">statement</em>, <em class="sig-param">global_vars</em>, <em class="sig-param">local_vars</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.profile" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Run statement under profiler, supplying your own globals and locals</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">stats</span> <span class="o">=</span> <span class="n">profile</span><span class="p">(</span><span class="s2">&quot;main()&quot;</span><span class="p">,</span> <span class="n">global_vars</span><span class="o">=</span><span class="nb">globals</span><span class="p">(),</span> <span class="n">local_vars</span><span class="o">=</span><span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.devtools.HtmlDiff">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.devtools.</code><code class="sig-name descname">HtmlDiff</code><span class="sig-paren">(</span><em class="sig-param">filepaths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object produces diff files in HTML format and displays them in the browser.</p>
<p>Usage example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">HtmlDiff</span><span class="p">(</span><span class="n">filepaths</span><span class="p">)</span><span class="o">.</span><span class="n">open_browser</span><span class="p">()</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.tools.devtools.HtmlDiff.open_browser">
<code class="sig-name descname">open_browser</code><span class="sig-paren">(</span><em class="sig-param">diffmode='difflib'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff.open_browser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff.open_browser" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generate diff with <code class="docutils literal notranslate"><span class="pre">diffmode</span></code>, open browser, return exit code.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.devtools.HtmlDiff.difflib">
<code class="sig-name descname">difflib</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff.difflib"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff.difflib" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Use difflib to generate a HTML file with the diff.
Open file in the browser.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.devtools.HtmlDiff.pygmentize">
<code class="sig-name descname">pygmentize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/devtools.html#HtmlDiff.pygmentize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.devtools.HtmlDiff.pygmentize" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Execute <code class="docutils literal notranslate"><span class="pre">diff</span></code> and <code class="docutils literal notranslate"><span class="pre">pygmentize</span></code> in a subprocess to generate a HTML file with the diff.
Open file in the browser.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.duck">
<span id="duck-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">duck</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.duck" title="Permalink to this headline">Â¶</a></h2>
<p>Duck-typing tests</p>
<dl class="function">
<dt id="abipy.tools.duck.is_string">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">is_string</code><span class="sig-paren">(</span><em class="sig-param">s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_string" title="Permalink to this definition">Â¶</a></dt>
<dd><p>True if s behaves like a string (duck typing test).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.is_intlike">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">is_intlike</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_intlike"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_intlike" title="Permalink to this definition">Â¶</a></dt>
<dd><p>True if obj represents an integer (float such as 1.0 are included as well).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.is_number_like">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">is_number_like</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_number_like"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_number_like" title="Permalink to this definition">Â¶</a></dt>
<dd><p>True if obj represents a number.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.is_listlike">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">is_listlike</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#is_listlike"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.is_listlike" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.list_ints">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">list_ints</code><span class="sig-paren">(</span><em class="sig-param">arg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#list_ints"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.list_ints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Always return a list of int, given a int or list of integers as input.</p>
<dl class="field-list simple">
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">list_ints</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">[1]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.torange">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">torange</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#torange"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.torange" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Convert obj into a range. Accepts integer, slice object  or any object
with an __iter__ method. Note that an integer is converted into range(int, int+1)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">torange</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="go">[1]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">torange</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
<span class="go">[0, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">torange</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">]))</span>
<span class="go">[1, 4, 2]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.as_slice">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">as_slice</code><span class="sig-paren">(</span><em class="sig-param">obj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#as_slice"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.as_slice" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Convert an integer, a string or a slice object into slice.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_slice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_slice</span><span class="p">(</span><span class="s2">&quot;[1:4]&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">as_slice</span><span class="p">(</span><span class="s2">&quot;1::2&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.duck.NoDefaultProvided">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">NoDefaultProvided</code><a class="reference internal" href="../_modules/abipy/tools/duck.html#NoDefaultProvided"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.NoDefaultProvided" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.hasattrd">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">hasattrd</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#hasattrd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.hasattrd" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The arguments are an object and a string.
The result is True if the string is the name of one of the objectâs attributes, False if not.
Unlike the builtin hasattr, hasattrd supports dot notation e.g. hasattr(int, â__class__.__name__â)
(This is implemented by calling getattrd(object, name) and seeing whether it raises an exception or not.)</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.duck.getattrd">
<code class="sig-prename descclassname">abipy.tools.duck.</code><code class="sig-name descname">getattrd</code><span class="sig-paren">(</span><em class="sig-param">obj</em>, <em class="sig-param">name</em>, <em class="sig-param">default=&lt;class 'abipy.tools.duck.NoDefaultProvided'&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/duck.html#getattrd"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.duck.getattrd" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Same as getattr(), but allows dot notation lookup e.g. getattrd(obj, âa.bâ)</p>
<p>Raises: AttributeError if <code class="docutils literal notranslate"><span class="pre">name</span></code> is not found and <code class="docutils literal notranslate"><span class="pre">default</span></code> is not given.</p>
<p>Discussed in: <a class="reference external" href="http://stackoverflow.com/questions/11975781">http://stackoverflow.com/questions/11975781</a></p>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.fftprof">
<span id="fftprof-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fftprof</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.fftprof" title="Permalink to this headline">Â¶</a></h2>
<p>Python interface to fftprof. Provides objects to benchmark
the FFT libraries used by ABINIT and plot the results with matplotlib.</p>
<dl class="class">
<dt id="abipy.tools.fftprof.FFTBenchmark">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.fftprof.</code><code class="sig-name descname">FFTBenchmark</code><span class="sig-paren">(</span><em class="sig-param">title</em>, <em class="sig-param">FFT_tests</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Container class storing the results of the FFT benchmark.</p>
<p>Use the class method <code class="docutils literal notranslate"><span class="pre">from_file</span></code> to generate a new instance.</p>
<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">fileobj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.from_file" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.iter_fftalgs">
<code class="sig-name descname">iter_fftalgs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.iter_fftalgs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.iter_fftalgs" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Iterator over the FFT algorithms.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.tests_with_fftalg">
<code class="sig-name descname">tests_with_fftalg</code><span class="sig-paren">(</span><em class="sig-param">fftalg</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.tests_with_fftalg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.tests_with_fftalg" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the list of FFT_tests with a given fftalg.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.fftprof.FFTBenchmark.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">exclude_algs=None</em>, <em class="sig-param">exclude_threads=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/fftprof.html#FFTBenchmark.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.fftprof.FFTBenchmark.plot" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Plot the wall-time and the speed-up.</p>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>âabc.pngâ or âabc.epsâ to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.iotools">
<span id="iotools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iotools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.iotools" title="Permalink to this headline">Â¶</a></h2>
<p>IO related utilities.</p>
<dl class="class">
<dt id="abipy.tools.iotools.ExitStackWithFiles">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.iotools.</code><code class="sig-name descname">ExitStackWithFiles</code><a class="reference internal" href="../_modules/abipy/tools/iotools.html#ExitStackWithFiles"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.ExitStackWithFiles" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">contextlib.ExitStack</span></code></a></p>
<p>Context manager for dynamic management of a stack of file-like objects.
Mainly used in a callee that needs to return files to the caller</p>
<p>Usage example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exit_stack</span> <span class="o">=</span> <span class="n">ExitStackWithFiles</span><span class="p">()</span>
<span class="n">exit_stack</span><span class="o">.</span><span class="n">enter_context</span><span class="p">(</span><span class="n">phbst_file</span><span class="p">)</span>
<span class="k">return</span> <span class="n">exit_stack</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.tools.iotools.ExitStackWithFiles.enter_context">
<code class="sig-name descname">enter_context</code><span class="sig-paren">(</span><em class="sig-param">myfile</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#ExitStackWithFiles.enter_context"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.ExitStackWithFiles.enter_context" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Enters the supplied context manager.</p>
<p>If successful, also pushes its __exit__ method as a callback and
returns the result of the __enter__ method.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.iotools.ask_yes_no">
<code class="sig-prename descclassname">abipy.tools.iotools.</code><code class="sig-name descname">ask_yes_no</code><span class="sig-paren">(</span><em class="sig-param">prompt</em>, <em class="sig-param">default=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#ask_yes_no"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.ask_yes_no" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Ask a question and return a boolean (y/n) answer.</p>
<p>If default is given (one of âyâ,ânâ), it is used if the user input is
empty. Otherwise the question is repeated until an answer is given.</p>
<p>An EOF is treated as the default answer.  If there is no default, an
exception is raised to prevent infinite loops.</p>
<p>Valid answers are: y/yes/n/no (match is not case sensitive).</p>
</dd></dl>

<dl class="exception">
<dt id="abipy.tools.iotools.EditorError">
<em class="property">exception </em><code class="sig-prename descclassname">abipy.tools.iotools.</code><code class="sig-name descname">EditorError</code><a class="reference internal" href="../_modules/abipy/tools/iotools.html#EditorError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.EditorError" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Base class for exceptions raised by <cite>Editor</cite></p>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.iotools.Editor">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.iotools.</code><code class="sig-name descname">Editor</code><span class="sig-paren">(</span><em class="sig-param">editor=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#Editor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.Editor" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="attribute">
<dt id="abipy.tools.iotools.Editor.DEFAULT_EDITOR">
<code class="sig-name descname">DEFAULT_EDITOR</code><em class="property"> = 'vi'</em><a class="headerlink" href="#abipy.tools.iotools.Editor.DEFAULT_EDITOR" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="abipy.tools.iotools.Editor.Error">
<code class="sig-name descname">Error</code><a class="headerlink" href="#abipy.tools.iotools.Editor.Error" title="Permalink to this definition">Â¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#abipy.tools.iotools.EditorError" title="abipy.tools.iotools.EditorError"><code class="xref py py-class docutils literal notranslate"><span class="pre">EditorError</span></code></a></p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.iotools.Editor.edit_file">
<code class="sig-name descname">edit_file</code><span class="sig-paren">(</span><em class="sig-param">fname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#Editor.edit_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.Editor.edit_file" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.iotools.Editor.edit_files">
<code class="sig-name descname">edit_files</code><span class="sig-paren">(</span><em class="sig-param">fnames</em>, <em class="sig-param">ask_for_exit=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#Editor.edit_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.Editor.edit_files" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.iotools.input_from_editor">
<code class="sig-prename descclassname">abipy.tools.iotools.</code><code class="sig-name descname">input_from_editor</code><span class="sig-paren">(</span><em class="sig-param">message=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/iotools.html#input_from_editor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.iotools.input_from_editor" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-abipy.tools.notebooks">
<span id="notebooks-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">notebooks</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.notebooks" title="Permalink to this headline">Â¶</a></h2>
<p>Tools for ipython notebooks.</p>
<dl class="function">
<dt id="abipy.tools.notebooks.print_source_in_module">
<code class="sig-prename descclassname">abipy.tools.notebooks.</code><code class="sig-name descname">print_source_in_module</code><span class="sig-paren">(</span><em class="sig-param">function</em>, <em class="sig-param">module</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#print_source_in_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.print_source_in_module" title="Permalink to this definition">Â¶</a></dt>
<dd><p>For use inside an <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook: given a module and a function, print the source code.</p>
<p>Based on:</p>
<blockquote>
<div><p><a class="reference external" href="http://stackoverflow.com/questions/20665118/how-to-show-source-code-of-a-package-function-in-ipython-notebook">http://stackoverflow.com/questions/20665118/how-to-show-source-code-of-a-package-function-in-ipython-notebook</a></p>
</div></blockquote>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.notebooks.print_source">
<code class="sig-prename descclassname">abipy.tools.notebooks.</code><code class="sig-name descname">print_source</code><span class="sig-paren">(</span><em class="sig-param">function</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#print_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.print_source" title="Permalink to this definition">Â¶</a></dt>
<dd><p>For use inside a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook: given a function, print the source code.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> â Passed to HtmlFormatter</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>HTML string.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.notebooks.print_doc">
<code class="sig-prename descclassname">abipy.tools.notebooks.</code><code class="sig-name descname">print_doc</code><span class="sig-paren">(</span><em class="sig-param">function</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#print_doc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.print_doc" title="Permalink to this definition">Â¶</a></dt>
<dd><p>For use inside a <a class="reference external" href="http://jupyter.org/">jupyter</a> notebook: given a function, print the docstring.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> â Passed to HtmlFormatter</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>HTML string.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.notebooks.ipw_listdir">
<code class="sig-prename descclassname">abipy.tools.notebooks.</code><code class="sig-name descname">ipw_listdir</code><span class="sig-paren">(</span><em class="sig-param">top='.'</em>, <em class="sig-param">recurse=True</em>, <em class="sig-param">widget_type='dropdown'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/notebooks.html#ipw_listdir"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.notebooks.ipw_listdir" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return an ipython widget listing all the files located within the directory <code class="docutils literal notranslate"><span class="pre">top</span></code>
that can be inspected with <a class="reference internal" href="../scripts/abiopen.html#abiopen-py"><span class="std std-ref">abiopen.py</span></a>. The user can select the file in the widget
and print info on the corresponding file inside the notebook.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top</strong> â Initial directory.</p></li>
<li><p><strong>recurse</strong> â False to ignore directories within <code class="docutils literal notranslate"><span class="pre">top</span></code>.</p></li>
<li><p><strong>widget_type</strong> â Specify the widget to create. Possible values in:
[âtooglebuttonsâ, âdropdownâ, âradiobuttonsâ]</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.numtools">
<span id="numtools-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">numtools</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.numtools" title="Permalink to this headline">Â¶</a></h2>
<p>Numeric tools.</p>
<dl class="function">
<dt id="abipy.tools.numtools.transpose_last3dims">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">transpose_last3dims</code><span class="sig-paren">(</span><em class="sig-param">arr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#transpose_last3dims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.transpose_last3dims" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Transpose the last three dimensions of arr: (â¦,x,y,z) â&gt; (â¦,z,y,x).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.add_periodic_replicas">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">add_periodic_replicas</code><span class="sig-paren">(</span><em class="sig-param">arr</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#add_periodic_replicas"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.add_periodic_replicas" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns a new array of shape=(â¦, nx+1,ny+1,nz+1) with redundant data points.</p>
<p>Periodicity in enforced only on the last three dimensions.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.data_from_cplx_mode">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">data_from_cplx_mode</code><span class="sig-paren">(</span><em class="sig-param">cplx_mode</em>, <em class="sig-param">arr</em>, <em class="sig-param">tol=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#data_from_cplx_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.data_from_cplx_mode" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Extract the data from the numpy array <code class="docutils literal notranslate"><span class="pre">arr</span></code> depending on the values of <code class="docutils literal notranslate"><span class="pre">cplx_mode</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cplx_mode</strong> â Possible values in (âreâ, âimâ, âabsâ, âangleâ)
âreâ for the real part,
âimâ for the imaginary part.
âallâ for both re and im.
âabsâ means that the absolute value of the complex number is shown.
âangleâ will display the phase of the complex number in radians.</p></li>
<li><p><strong>tol</strong> â If not None, values below tol are set to zero. Cannot be used with âangleâ</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.is_diagonal">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">is_diagonal</code><span class="sig-paren">(</span><em class="sig-param">matrix</em>, <em class="sig-param">atol=1e-12</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#is_diagonal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.is_diagonal" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return True if matrix is diagonal.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.alternate">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">alternate</code><span class="sig-paren">(</span><em class="sig-param">*iterables</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#alternate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.alternate" title="Permalink to this definition">Â¶</a></dt>
<dd><p>[a[0], b[0], â¦ , a[1], b[1], â¦, a[n], b[n] â¦]
&gt;&gt;&gt; alternate([1,4], [2,5], [3,6])
[1, 2, 3, 4, 5, 6]</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.iflat">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">iflat</code><span class="sig-paren">(</span><em class="sig-param">iterables</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#iflat"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.iflat" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Iterator over all elements of a nested iterable. Itâs recursive!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">iflat</span><span class="p">([[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]]))</span>
<span class="go">[0, 1, 2, 3, 4]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.grouper">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">grouper</code><span class="sig-paren">(</span><em class="sig-param">n</em>, <em class="sig-param">iterable</em>, <em class="sig-param">fillvalue=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#grouper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.grouper" title="Permalink to this definition">Â¶</a></dt>
<dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">grouper</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;ABCDEFG&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">[(</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;x&#39;</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">grouper</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span> <span class="o">==</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.sort_and_groupby">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">sort_and_groupby</code><span class="sig-paren">(</span><em class="sig-param">items</em>, <em class="sig-param">key=None</em>, <em class="sig-param">reverse=False</em>, <em class="sig-param">ret_lists=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#sort_and_groupby"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.sort_and_groupby" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Sort <code class="docutils literal notranslate"><span class="pre">items</span></code> using <code class="docutils literal notranslate"><span class="pre">key</span></code> function and invoke itertools.groupby to group items.
If ret_lists is True, a tuple of lists (keys, groups) is returned else iterator.
See itertools.groupby for further info.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">sort_and_groupby</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">ret_lists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">([1, 2], [[1, 1], [2]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.prune_ord">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">prune_ord</code><span class="sig-paren">(</span><em class="sig-param">alist</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#prune_ord"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.prune_ord" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return new list where all duplicated items in alist are removed</p>
<ol class="arabic simple">
<li><p>The order of items in alist is preserved.</p></li>
<li><p>items in alist MUST be hashable.</p></li>
</ol>
<p>Taken from <a class="reference external" href="http://code.activestate.com/recipes/52560/">http://code.activestate.com/recipes/52560/</a>
&gt;&gt;&gt; prune_ord([1, 1, 2, 3, 3])
[1, 2, 3]</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.gaussian">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">gaussian</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">width</em>, <em class="sig-param">center=0.0</em>, <em class="sig-param">height=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.gaussian" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns the values of gaussian(x) where x is array-like.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> â Input array.</p></li>
<li><p><strong>width</strong> â Width of the gaussian.</p></li>
<li><p><strong>center</strong> â Center of the gaussian.</p></li>
<li><p><strong>height</strong> â height of the gaussian. If height is None, a normalized gaussian is returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.lorentzian">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">lorentzian</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">width</em>, <em class="sig-param">center=0.0</em>, <em class="sig-param">height=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#lorentzian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.lorentzian" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns the values of gaussian(x) where x is array-like.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> â Input array.</p></li>
<li><p><strong>width</strong> â Width of the Lorentzian (half-width at half-maximum)</p></li>
<li><p><strong>center</strong> â Center of the Lorentzian.</p></li>
<li><p><strong>height</strong> â height of the Lorentzian. If height is None, a normalized Lorentzian is returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.smooth">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">smooth</code><span class="sig-paren">(</span><em class="sig-param">x</em>, <em class="sig-param">window_len=11</em>, <em class="sig-param">window='hanning'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#smooth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.smooth" title="Permalink to this definition">Â¶</a></dt>
<dd><p>smooth the data using a window with requested size.</p>
<p>This method is based on the convolution of a scaled window with the signal.
The signal is prepared by introducing reflected copies of the signal
(with the window size) in both ends so that transient parts are minimized
in the begining and end part of the output signal.
Taken from <a class="reference external" href="http://www.scipy.org/Cookbook/SignalSmooth">http://www.scipy.org/Cookbook/SignalSmooth</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> â the input signal</p></li>
<li><p><strong>window_len</strong> â the dimension of the smoothing window. it should be an odd integer</p></li>
<li><p><strong>window</strong> â the type of window from âflatâ, âhanningâ, âhammingâ, âbartlettâ, âblackmanâ.
âflatâ window will produce a moving average smoothing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the smoothed signal.</p>
</dd>
</dl>
<p>example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">t</span><span class="p">))</span><span class="o">*</span><span class="mf">0.1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">smooth</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>see also:</p>
<p>numpy.hanning, numpy.hamming, numpy.bartlett, numpy.blackman, numpy.convolve scipy.signal.lfilter</p>
<p>TODO: the window parameter could be the window itself if an array instead of a string</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.find_convindex">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">find_convindex</code><span class="sig-paren">(</span><em class="sig-param">values</em>, <em class="sig-param">tol</em>, <em class="sig-param">min_numpts=1</em>, <em class="sig-param">mode='abs'</em>, <em class="sig-param">vinf=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#find_convindex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.find_convindex" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Given a list of values and a tolerance tol, returns the leftmost index for which</p>
<blockquote>
<div><p>abs(value[i] - vinf) &lt; tol if mode == âabsâ</p>
</div></blockquote>
<dl class="simple">
<dt>or</dt><dd><p>abs(value[i] - vinf) / vinf &lt; tol if mode == ârelâ</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tol</strong> â Tolerance</p></li>
<li><p><strong>min_numpts</strong> â Minimum number of points that must be converged.</p></li>
<li><p><strong>mode</strong> â âabsâ for absolute convergence, ârelâ for relative convergence.</p></li>
<li><p><strong>vinf</strong> â Used to specify an alternative value instead of values[-1].
By default, vinf = values[-1]</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>-1 if convergence is not achieved else the index in values.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.numtools.BlochRegularGridInterpolator">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">BlochRegularGridInterpolator</code><span class="sig-paren">(</span><em class="sig-param">structure</em>, <em class="sig-param">datar</em>, <em class="sig-param">add_replicas=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#BlochRegularGridInterpolator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.BlochRegularGridInterpolator" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>This object interpolates the periodic part of a Bloch state in real space.</p>
<dl class="method">
<dt id="abipy.tools.numtools.BlochRegularGridInterpolator.eval_line">
<code class="sig-name descname">eval_line</code><span class="sig-paren">(</span><em class="sig-param">point1</em>, <em class="sig-param">point2</em>, <em class="sig-param">num=200</em>, <em class="sig-param">cartesian=False</em>, <em class="sig-param">kpoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#BlochRegularGridInterpolator.eval_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.BlochRegularGridInterpolator.eval_line" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Interpolate values along a line.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>point1</strong> â First point of the line. Accepts 3d vector or integer.
The vector is in reduced coordinates unless <cite>cartesian == True</cite>.
If integer, the first point of the line is given by the i-th site of the structure
e.g. <cite>point1=0, point2=1</cite> gives the line passing through the first two atoms.</p></li>
<li><p><strong>point2</strong> â Second point of the line. Same API as <cite>point1</cite>.</p></li>
<li><p><strong>num</strong> â Number of points sampled along the line.</p></li>
<li><p><strong>cartesian</strong> â By default, <cite>point1</cite> and <cite>point1</cite> are interpreted as points in fractional
coordinates (if not integers). Use True to pass points in cartesian coordinates.</p></li>
<li><p><strong>kpoint</strong> â k-point in reduced coordinates. If not None, the phase-factor e^{ikr} is included.</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>Return: named tuple with</dt><dd><p>site1, site2: None if the points do not represent atomic sites.
points: Points in fractional coords.
dist: the distance of points along the line in Ang.
values: numpy array of shape [ndt, num] with interpolated values.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.numtools.BlochRegularGridInterpolator.eval_points">
<code class="sig-name descname">eval_points</code><span class="sig-paren">(</span><em class="sig-param">frac_coords</em>, <em class="sig-param">idt=None</em>, <em class="sig-param">cartesian=False</em>, <em class="sig-param">kpoint=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#BlochRegularGridInterpolator.eval_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.BlochRegularGridInterpolator.eval_points" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Interpolate values on an arbitrary list of points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frac_coords</strong> â List of points in reduced coordinates unless <cite>cartesian</cite>.</p></li>
<li><p><strong>idt</strong> â Index of the sub-array to interpolate. If None, all sub-arrays are interpolated.</p></li>
<li><p><strong>cartesian</strong> â True if points are in cartesian coordinates.</p></li>
<li><p><strong>kpoint</strong> â k-point in reduced coordinates. If not None, the phase-factor e^{ikr} is included.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>[ndt, npoints] array or [1, npoints] if idt is not None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.numtools.find_degs_sk">
<code class="sig-prename descclassname">abipy.tools.numtools.</code><code class="sig-name descname">find_degs_sk</code><span class="sig-paren">(</span><em class="sig-param">enesb</em>, <em class="sig-param">atol</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#find_degs_sk"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.numtools.find_degs_sk" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return list of lists with the indices of the degenerated bands.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>enesb</strong> â Iterable with energies for the different bands.
Energies are assumed to be ordered.</p></li>
<li><p><strong>atol</strong> â Absolute tolerance. Two states are degenerated if they differ by less than <cite>atol</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>List of lists. The i-th item contains the indices of the degenerates states</dt><dd><p>for the i-th degenerated set.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Examples</dt>
<dd class="field-odd"><p></p></dd>
</dl>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">find_degs_sk</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">3.4</span><span class="p">,</span> <span class="mf">3.401</span><span class="p">],</span> <span class="n">atol</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="go">[[0, 1], [2], [3, 4]]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="module-abipy.tools.plotting">
<span id="plotting-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">plotting</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.plotting" title="Permalink to this headline">Â¶</a></h2>
<p>Utilities for generating matplotlib plots.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Avoid importing matplotlib in the module namespace otherwise startup is very slow.</p>
</div>
<dl class="function">
<dt id="abipy.tools.plotting.get_ax_fig_plt">
<code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">get_ax_fig_plt</code><span class="sig-paren">(</span><em class="sig-param">ax=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pymatgen/util/plotting.html#get_ax_fig_plt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.get_ax_fig_plt" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Helper function used in plot functions supporting an optional Axes argument.
If ax is None, we build the <cite>matplotlib</cite> figure and create the Axes else
we return the current active figure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> â keyword arguments are passed to plt.figure if ax is not None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code> object
figure: matplotlib figure
plt: matplotlib pyplot module.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ax</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.get_ax3d_fig_plt">
<code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">get_ax3d_fig_plt</code><span class="sig-paren">(</span><em class="sig-param">ax=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pymatgen/util/plotting.html#get_ax3d_fig_plt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.get_ax3d_fig_plt" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Helper function used in plot functions supporting an optional Axes3D
argument. If ax is None, we build the <cite>matplotlib</cite> figure and create the
Axes3D else we return the current active figure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>kwargs</strong> â keyword arguments are passed to plt.figure if ax is not None.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Axes</span></code> object
figure: matplotlib figure
plt: matplotlib pyplot module.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ax</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.data_from_cplx_mode">
<code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">data_from_cplx_mode</code><span class="sig-paren">(</span><em class="sig-param">cplx_mode</em>, <em class="sig-param">arr</em>, <em class="sig-param">tol=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/numtools.html#data_from_cplx_mode"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.data_from_cplx_mode" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Extract the data from the numpy array <code class="docutils literal notranslate"><span class="pre">arr</span></code> depending on the values of <code class="docutils literal notranslate"><span class="pre">cplx_mode</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cplx_mode</strong> â Possible values in (âreâ, âimâ, âabsâ, âangleâ)
âreâ for the real part,
âimâ for the imaginary part.
âallâ for both re and im.
âabsâ means that the absolute value of the complex number is shown.
âangleâ will display the phase of the complex number in radians.</p></li>
<li><p><strong>tol</strong> â If not None, values below tol are set to zero. Cannot be used with âangleâ</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.set_axlims">
<code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">set_axlims</code><span class="sig-paren">(</span><em class="sig-param">ax</em>, <em class="sig-param">lims</em>, <em class="sig-param">axname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#set_axlims"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.set_axlims" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set the data limits for the axis ax.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lims</strong> â tuple(2) for (left, right), tuple(1) or scalar for left only.</p></li>
<li><p><strong>axname</strong> â âxâ for x-axis, âyâ for y-axis.</p></li>
</ul>
</dd>
</dl>
<p>Return: (left, right)</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.plot_array">
<code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">plot_array</code><span class="sig-paren">(</span><em class="sig-param">array</em>, <em class="sig-param">color_map=None</em>, <em class="sig-param">cplx_mode='abs'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#plot_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.plot_array" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Use imshow for plotting 2D or 1D arrays.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">plot_array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
</pre></div>
</div>
<p>See &lt;<a class="reference external" href="http://stackoverflow.com/questions/7229971/2d-grid-data-visualization-in-python">http://stackoverflow.com/questions/7229971/2d-grid-data-visualization-in-python</a>&gt;</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>array</strong> â Array-like object (1D or 2D).</p></li>
<li><p><strong>color_map</strong> â color map.</p></li>
<li><p><strong>cplx_mode</strong> â Flag defining how to handle complex arrays. Possible values in (âreâ, âimâ, âabsâ, âangleâ)
âreâ for the real part, âimâ for the imaginary part.
âabsâ means that the absolute value of the complex number is shown.
âangleâ will display the phase of the complex number in radians.</p></li>
</ul>
</dd>
</dl>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<blockquote>
<div><p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>âabc.pngâ or âabc.epsâ to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.ArrayPlotter">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">ArrayPlotter</code><span class="sig-paren">(</span><em class="sig-param">*labels_and_arrays</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.keys">
<code class="sig-name descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.keys" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.items">
<code class="sig-name descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.items"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.items" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.add_array">
<code class="sig-name descname">add_array</code><span class="sig-paren">(</span><em class="sig-param">label</em>, <em class="sig-param">array</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.add_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.add_array" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add array with the given name.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.add_arrays">
<code class="sig-name descname">add_arrays</code><span class="sig-paren">(</span><em class="sig-param">labels</em>, <em class="sig-param">arr_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.add_arrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.add_arrays" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add a list of arrays</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>labels</strong> â List of labels.</p></li>
<li><p><strong>arr_list</strong> â List of arrays.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.ArrayPlotter.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">cplx_mode='abs'</em>, <em class="sig-param">colormap='jet'</em>, <em class="sig-param">fontsize=8</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#ArrayPlotter.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.ArrayPlotter.plot" title="Permalink to this definition">Â¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cplx_mode</strong> â âabsâ for absolute value, âreâ, âimâ, âangleâ</p></li>
<li><p><strong>colormap</strong> â matplotlib colormap.</p></li>
<li><p><strong>fontsize</strong> â legend and label fontsize.</p></li>
</ul>
</dd>
</dl>
<p>Returns: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>âabc.pngâ or âabc.epsâ to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.Marker">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">Marker</code><a class="reference internal" href="../_modules/abipy/tools/plotting.html#Marker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.Marker" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#abipy.tools.plotting.Marker" title="abipy.tools.plotting.Marker"><code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.tools.plotting.Marker</span></code></a></p>
<p>Stores the position and the size of the marker.
A marker is a list of tuple(x, y, s) where x, and y are the position
in the graph and s is the size of the marker.
Used for plotting purpose e.g. QP data, energy derivativesâ¦</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3</span><span class="p">]</span>
<span class="n">marker</span> <span class="o">=</span> <span class="n">Marker</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
<span class="n">marker</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">s</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt id="abipy.tools.plotting.Marker.extend">
<code class="sig-name descname">extend</code><span class="sig-paren">(</span><em class="sig-param">xys</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#Marker.extend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.Marker.extend" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Extend the marker values.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.Marker.posneg_marker">
<code class="sig-name descname">posneg_marker</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#Marker.posneg_marker"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.Marker.posneg_marker" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Split data into two sets: the first one contains all the points with positive size.
The first set contains all the points with negative size.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="abipy.tools.plotting.plot_unit_cell">
<code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">plot_unit_cell</code><span class="sig-paren">(</span><em class="sig-param">lattice</em>, <em class="sig-param">ax=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#plot_unit_cell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.plot_unit_cell" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Adds the unit cell of the lattice to a matplotlib Axes3D</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lattice</strong> â Lattice object</p></li>
<li><p><strong>ax</strong> â matplotlib <code class="xref py py-class docutils literal notranslate"><span class="pre">Axes3D</span></code> or None if a new figure should be created.</p></li>
<li><p><strong>kwargs</strong> â kwargs passed to the matplotlib function âplotâ. Color defaults to black
and linewidth to 3.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>matplotlib figure and ax</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.GenericDataFilePlotter">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">GenericDataFilePlotter</code><span class="sig-paren">(</span><em class="sig-param">filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilePlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilePlotter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Extract data from a generic text file with results
in tabular format and plot data with matplotlib.
Multiple datasets are supported.
No attempt is made to handle metadata (e.g. column name)
Mainly used to handle text files written without any schema.</p>
<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilePlotter.to_string">
<code class="sig-name descname">to_string</code><span class="sig-paren">(</span><em class="sig-param">verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilePlotter.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilePlotter.to_string" title="Permalink to this definition">Â¶</a></dt>
<dd><p>String representation with verbosity level <cite>verbose</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilePlotter.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">use_index=False</em>, <em class="sig-param">fontsize=8</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilePlotter.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilePlotter.plot" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Plot all arrays. Use multiple axes if datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_index</strong> â By default, the x-values are taken from the first column.
If use_index is False, the x-values are the row index.</p></li>
<li><p><strong>fontsize</strong> â fontsize for title.</p></li>
<li><p><strong>kwargs</strong> â options passed to <code class="docutils literal notranslate"><span class="pre">ax.plot</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>âabc.pngâ or âabc.epsâ to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.plotting.</code><code class="sig-name descname">GenericDataFilesPlotter</code><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.from_files">
<em class="property">classmethod </em><code class="sig-name descname">from_files</code><span class="sig-paren">(</span><em class="sig-param">filepaths</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.from_files"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.from_files" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Build object from a list of <cite>filenames</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.to_string">
<code class="sig-name descname">to_string</code><span class="sig-paren">(</span><em class="sig-param">verbose=0</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.to_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.to_string" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.add_file">
<code class="sig-name descname">add_file</code><span class="sig-paren">(</span><em class="sig-param">filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.add_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.add_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Add data from <cite>filepath</cite></p>
</dd></dl>

<dl class="method">
<dt id="abipy.tools.plotting.GenericDataFilesPlotter.plot">
<code class="sig-name descname">plot</code><span class="sig-paren">(</span><em class="sig-param">use_index=False</em>, <em class="sig-param">fontsize=8</em>, <em class="sig-param">colormap='viridis'</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/plotting.html#GenericDataFilesPlotter.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.plotting.GenericDataFilesPlotter.plot" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Plot all arrays. Use multiple axes if datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>use_index</strong> â By default, the x-values are taken from the first column.
If use_index is False, the x-values are the row index.</p></li>
<li><p><strong>fontsize</strong> â fontsize for title.</p></li>
<li><p><strong>colormap</strong> â matplotlib color map.</p></li>
<li><p><strong>kwargs</strong> â options passed to <code class="docutils literal notranslate"><span class="pre">ax.plot</span></code>.</p></li>
</ul>
</dd>
</dl>
<p>Return: <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" title="(in Matplotlib v3.2.1)"><code class="xref py py-class docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code></a></p>
<p>Keyword arguments controlling the display of the figure:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kwargs</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>title</p></td>
<td><p>Title of the plot (Default: None).</p></td>
</tr>
<tr class="row-odd"><td><p>show</p></td>
<td><p>True to show the figure (default: True).</p></td>
</tr>
<tr class="row-even"><td><p>savefig</p></td>
<td><p>âabc.pngâ or âabc.epsâ to save the figure to a file.</p></td>
</tr>
<tr class="row-odd"><td><p>size_kwargs</p></td>
<td><p>Dictionary with options passed to fig.set_size_inches
e.g. size_kwargs=dict(w=3, h=4)</p></td>
</tr>
<tr class="row-even"><td><p>tight_layout</p></td>
<td><p>True to call fig.tight_layout (default: False)</p></td>
</tr>
<tr class="row-odd"><td><p>ax_grid</p></td>
<td><p>True (False) to add (remove) grid from all axes in fig.
Default: None i.e. fig is left unchanged.</p></td>
</tr>
<tr class="row-even"><td><p>ax_annotate</p></td>
<td><p>Add labels to  subplots e.g. (a), (b).
Default: False</p></td>
</tr>
<tr class="row-odd"><td><p>fig_close</p></td>
<td><p>Close figure. Default: False.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.tensors">
<span id="tensors-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tensors</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.tensors" title="Permalink to this headline">Â¶</a></h2>
<p>This modules provides subclasses of pymatgen tensor objects.</p>
<dl class="class">
<dt id="abipy.tools.tensors.Stress">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.tensors.</code><code class="sig-name descname">Stress</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#Stress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.Stress" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pymatgen.org/pymatgen.analysis.elasticity.stress.html#pymatgen.analysis.elasticity.stress.Stress" title="(in pymatgen v2020.4.29)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.analysis.elasticity.stress.Stress</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.tools.tensors._Tensor33</span></code></p>
<p>Stress tensor. rank2 symmetric tensor with shape [3, 3].</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-bef67ce883d9a2caad752ac8cfa8b19f23a8586f.png" alt="Inheritance diagram of Stress" usemap="#inheritancee0818c4a88" class="inheritance graphviz" /></div>
<map id="inheritancee0818c4a88" name="inheritancee0818c4a88">
<area shape="rect" id="node1" href="#abipy.tools.tensors.Stress" target="_top" title="Stress tensor. rank2 symmetric tensor with shape [3, 3]." alt="" coords="658,18,765,33"/>
</map></dd></dl>

<dl class="class">
<dt id="abipy.tools.tensors.DielectricTensor">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.tensors.</code><code class="sig-name descname">DielectricTensor</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#DielectricTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.DielectricTensor" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.SquareTensor" title="(in pymatgen v2020.4.29)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.core.tensors.SquareTensor</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.tools.tensors._Tensor33</span></code></p>
<p>Subclass of <a class="reference external" href="https://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.Tensor" title="(in pymatgen v2020.4.29)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.core.tensors.Tensor</span></code></a> describing a dielectric tensor.
rank2 symmetric tensor with shape [3, 3].</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-f7360ca53631a096888f935eed846356cd5753b3.png" alt="Inheritance diagram of DielectricTensor" usemap="#inheritance9126c67f60" class="inheritance graphviz" /></div>
<map id="inheritance9126c67f60" name="inheritance9126c67f60">
<area shape="rect" id="node1" href="#abipy.tools.tensors.DielectricTensor" target="_top" title="Subclass of |pmg&#45;Tensor| describing a dielectric tensor." alt="" coords="584,23,764,42"/>
</map><dl class="method">
<dt id="abipy.tools.tensors.DielectricTensor.reflectivity">
<code class="sig-name descname">reflectivity</code><span class="sig-paren">(</span><em class="sig-param">n1=1</em>, <em class="sig-param">tol=1e-06</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/tensors.html#DielectricTensor.reflectivity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.DielectricTensor.reflectivity" title="Permalink to this definition">Â¶</a></dt>
<dd><p>If the tensor is diagonal (with off diagonal elements smaller than tol)
returns the three components of the reflectivity</p>
<blockquote>
<div><p><span class="math notranslate nohighlight">\(|n1 - n2| / | n1 + n2 |\)</span></p>
</div></blockquote>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="abipy.tools.tensors.ZstarTensor">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.tensors.</code><code class="sig-name descname">ZstarTensor</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#ZstarTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.ZstarTensor" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.SquareTensor" title="(in pymatgen v2020.4.29)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.core.tensors.SquareTensor</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">abipy.tools.tensors._Tensor33</span></code></p>
<p>Born effective charge tensor (for a single atom).</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-c7f774777ea559b20a078a8e5fc0b5038391950a.png" alt="Inheritance diagram of ZstarTensor" usemap="#inheritance44d2641f3b" class="inheritance graphviz" /></div>
<map id="inheritance44d2641f3b" name="inheritance44d2641f3b">
<area shape="rect" id="node1" href="#abipy.tools.tensors.ZstarTensor" target="_top" title="Born effective charge tensor (for a single atom)." alt="" coords="599,24,764,43"/>
</map></dd></dl>

<dl class="class">
<dt id="abipy.tools.tensors.NLOpticalSusceptibilityTensor">
<em class="property">class </em><code class="sig-prename descclassname">abipy.tools.tensors.</code><code class="sig-name descname">NLOpticalSusceptibilityTensor</code><a class="reference internal" href="../_modules/abipy/tools/tensors.html#NLOpticalSusceptibilityTensor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.NLOpticalSusceptibilityTensor" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.Tensor" title="(in pymatgen v2020.4.29)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.core.tensors.Tensor</span></code></a></p>
<p>Subclass of <a class="reference external" href="https://pymatgen.org/pymatgen.core.tensors.html#pymatgen.core.tensors.Tensor" title="(in pymatgen v2020.4.29)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pymatgen.core.tensors.Tensor</span></code></a> containing the non-linear optical susceptibility tensor.</p>
<p class="rubric">Inheritance Diagram</p>
<div class="graphviz"><img src="../_images/inheritance-e110d9b3aeac9bdde731c4f32368a9db84f36f79.png" alt="Inheritance diagram of NLOpticalSusceptibilityTensor" usemap="#inheritance32ca961597" class="inheritance graphviz" /></div>
<map id="inheritance32ca961597" name="inheritance32ca961597">
<area shape="rect" id="node1" href="#abipy.tools.tensors.NLOpticalSusceptibilityTensor" target="_top" title="Subclass of |pmg&#45;Tensor| containing the non&#45;linear optical susceptibility tensor." alt="" coords="453,29,763,53"/>
</map><dl class="method">
<dt id="abipy.tools.tensors.NLOpticalSusceptibilityTensor.from_file">
<em class="property">classmethod </em><code class="sig-name descname">from_file</code><span class="sig-paren">(</span><em class="sig-param">filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/tensors.html#NLOpticalSusceptibilityTensor.from_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.tensors.NLOpticalSusceptibilityTensor.from_file" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Creates the tensor from an anaddb.nc netcdf file containing <code class="docutils literal notranslate"><span class="pre">dchide</span></code>.
This requires to run anaddb with <code class="docutils literal notranslate"><span class="pre">tnlflag</span></code> &gt; 0</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-abipy.tools.text">
<span id="text-module"></span><h2><a class="toc-backref" href="#contents"><code class="xref py py-mod docutils literal notranslate"><span class="pre">text</span></code> Module</a><a class="headerlink" href="#module-abipy.tools.text" title="Permalink to this headline">Â¶</a></h2>
<p>Utilities for working with strings and text.</p>
<dl class="function">
<dt id="abipy.tools.text.tonumber">
<code class="sig-prename descclassname">abipy.tools.text.</code><code class="sig-name descname">tonumber</code><span class="sig-paren">(</span><em class="sig-param">s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/text.html#tonumber"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.text.tonumber" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Convert string to number, raise ValueError if s cannot be converted.</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.text.nums_and_text">
<code class="sig-prename descclassname">abipy.tools.text.</code><code class="sig-name descname">nums_and_text</code><span class="sig-paren">(</span><em class="sig-param">line</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/text.html#nums_and_text"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.text.nums_and_text" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Split line into (numbers, text).</p>
</dd></dl>

<dl class="function">
<dt id="abipy.tools.text.rreplace">
<code class="sig-prename descclassname">abipy.tools.text.</code><code class="sig-name descname">rreplace</code><span class="sig-paren">(</span><em class="sig-param">s</em>, <em class="sig-param">old</em>, <em class="sig-param">new</em>, <em class="sig-param">occurrence</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/abipy/tools/text.html#rreplace"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#abipy.tools.text.rreplace" title="Permalink to this definition">Â¶</a></dt>
<dd><p>replace old with new in string but, instead of starting from the beginning
as replace does, starting from the end.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;1232425&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;123 4 5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;1 3 4 5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;1 3 4 5&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">rreplace</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;1232425&#39;</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018, M. Giantomassi and the AbiPy group.<br/>
      Last updated on May 29, 2020.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.0.<br/>
    </p>
  </div>
</footer>
  </body>
</html>